{{/* Partial para mostrar preview de badges en el home (últimos 6) */}}
{{ $badges := .Site.Data.badges }}
{{ $categorias := .Site.Data.categorias }}
{{ $recentBadges := first 6 (sort $badges "fecha" "desc") }}

{{ if $recentBadges }}
<section class="badges-preview">
    <div class="container">
        <h2 class="badges-title">Aprendizaje Continuo</h2>
        <p class="badges-subtitle">Más de 20 años de oficio, con el hambre de aprender del primer día.</p>
        
        <div class="badges-grid-preview">
            {{ range $recentBadges }}
            {{ $cat := index (where $categorias "id" .categoria) 0 }}
            <a href="{{ .url }}" target="_blank" rel="noopener" class="badge-card" title="{{ .desc }}">
                <div class="badge-image">
                    <img src="{{ .img }}" alt="{{ .titulo }}" loading="lazy">
                </div>
                <div class="badge-info">
                    <span class="badge-category" style="color: {{ $cat.color }}">
                        <i class="fa-solid {{ $cat.icono }}"></i> {{ $cat.nombre }}
                    </span>
                    <h3 class="badge-title">{{ .titulo }}</h3>
                    <time class="badge-date" datetime="{{ .fecha }}">
                        <i class="fa-regular fa-calendar-alt"></i> {{ .fecha }}
                    </time>
                </div>
            </a>
            {{ end }}
        </div>
        
        <div class="badges-footer">
            <a href="/badges" class="badges-link">
                Ver todas las insignias <i class="fa-solid fa-arrow-right"></i>
            </a>
        </div>
    </div>
</section>
{{ end }}
